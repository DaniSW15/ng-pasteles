<div class="cliente-list">
    @if (error()) {
        <p class="error">Error: {{ error() }}</p>
    }

    @if (loading() && clientes().length === 0) {
        <app-loading-spinner message="Cargando pasteles..." />
    } @else {
        @if (viewMode() === 'table') {
            <app-data-table
                [data]="clientes()"
                [columns]="columns"
                [loading]="loading()"
                (rowSelect)="onRowSelect($event)"
                (rowEdit)="onRowEdit($event)"
                (rowDelete)="onRowDelete($event)"
            />
        } @else {
            <div class="clientes-grid">
                @for (cliente of clientes(); track cliente.id) {
                    <app-cliente-card
                        [cliente]="cliente"
                        (select)="clienteSelect.emit($event)"
                        (edit)="clienteEdit.emit($event)"
                        (delete)="clienteDelete.emit($event)"
                    />
                }
            </div>
        }

        <app-pagination
            [currentPage]="currentPage()"
            [pageSize]="pageSize()"
            [totalCount]="totalCount()"
            (pageChange)="pageChange.emit($event)"
        />
    }
</div>